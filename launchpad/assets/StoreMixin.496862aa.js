import{d as o,Q as h,R as l,U as a,j as n,V as d,W as s,X as f,Y as p,a as u,Z as D,$ as v}from"./index.28d01b6e.js";import"./web3.df38e8f9.js";var w=o("project",{state:()=>({projectId:"",projectDetails:{},kycData:{},presaleData:{},refreshEnabled:!0,refreshInterval:void 0,refreshIntervalSeconds:15}),getters:{},actions:{async init(t){this.projectId=t;const r=await this.refresh();return this.refreshEnabled&&(this.refreshInterval=setInterval(async()=>{h!="production"&&console.log("Refreshing project data..."),await this.refresh()},this.refreshIntervalSeconds*1e3)),r},reset(){this.refreshInterval&&clearInterval(this.refreshInterval),this.refreshInterval=void 0,this.projectId="",this.projectDetails={},this.kycData={},this.presaleData={}},async refresh(){let t=!0;if(!this.projectId)return!1;await l(this.projectId).then(e=>{this.projectDetails=e}).catch(e=>{console.error(e),a({text:"An error occurred while fetching project data",type:"error"}),t=!1});const r=n(),i=r.isAuthenticated?d(this.projectId).then(e=>{this.kycData=e}).catch(e=>{console.error(e),a({text:"An error occurred while fetching project data",type:"error"}),t=!1}):Promise.resolve(),c=this.projectDetails.smartContractAddress&&this.projectDetails.tokenAddress?f(this.projectDetails.smartContractAddress,this.projectDetails.tokenAddress,r.walletAddress,this.projectId).then(e=>{this.presaleData=e}).catch(e=>{console.error(e),a({text:"An error occurred while fetching project data",type:"error"}),t=!1}):new Promise(e=>{this.presaleData={tierData:new Map,purchaseData:{tiersJoined:[],spentTotalUSDC:new s(0),spentByTierUSDC:new Map,accountBalanceUSDC:new s(0),accountBalanceMXLT:new s(0)},claimData:{tokensPurchased:new s(0),tokensClaimable:new s(0),tokensClaimed:new s(0),tokensVested:new s(0)}},e(null)});return await Promise.all([i,c]),t}}}),I=o("locking",{state:()=>({lockingData:void 0,refreshEnabled:!0,refreshInterval:void 0,refreshIntervalSeconds:10}),getters:{},actions:{async init(){await this.refresh(),this.refreshInterval=setInterval(async()=>{await this.refresh()},this.refreshIntervalSeconds*1e3)},reset(){this.refreshInterval&&clearInterval(this.refreshInterval),this.refreshInterval=void 0,this.lockingData={}},async refresh(){if(!this.refreshEnabled)return;const t=n();t.isAuthenticated&&t.walletAddress&&await p(t.walletAddress).then(r=>{this.lockingData=r}).catch(r=>{console.error(r),a({text:"An error occurred while fetching locking data",type:"error"})})}}});const S=u({name:"StoreMixin",computed:{authStore(){return n()},web3Store(){return D()},projectStore(){return w()},lockingStore(){return I()},configStore(){return v()}}});export{S as _};
